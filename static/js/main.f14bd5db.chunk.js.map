{"version":3,"sources":["components/ratingStars/ratingStars.js","components/ratingProduct/ratingProduct.js","components/photoProduct/photoProduct.js","components/filterComments/filterComments.js","components/comments/headerComment.js","components/comments/bodyComment.js","components/comments/comments.js","App.js","reportWebVitals.js","index.js"],"names":["RatingStars","props","stars","Array","countStars","fill","count","Math","ceil","rating","className","map","_","ind","isStarOn","Number","isInteger","RatingProduct","data","product","reviews_count","PhotoProduct","picture_urls","el","src","alt","name","FilterComments","state","selected","allReviews","handleChange","bind","getAllReviewsFromApi","e","this","setState","target","value","reviews","sortReviews","sort","a","b","Date","created_at","i","meta","total_pages","url","fetch","res","dataJSON","ok","json","onChange","Component","getDateOfPost","time","toLocaleDateString","day","month","year","HeaderComment","timeUsage","author","details","find","label","BodyComment","likesCount","likes","dislikesCount","dislikes","isLikeClicked","isDislikeClicked","likesHandleClick","dislikesHandleClick","body","onClick","Comments","setNewKey","currentPage","perPage","per_page","loadCommentMore","preventDefault","loadComments","slice","id","toString","App","totalPage","sortReviewsDate","getDataFromApi","addMoreComments","sortReviewsHandle","click","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f14bd5db.chunk.js","sourcesContent":["import './style.css'\r\n\r\nconst RatingStars = (props) => {\r\n  const stars = Array(props.countStars).fill(0);\r\n  const count = Math.ceil(props.rating);\r\n\r\n  return (\r\n  <div className=\"rating\">\r\n    <div className=\"stars\">\r\n      {stars.map((_, ind) => {\r\n        const isStarOn = ind < count ? 'stars__item_on' : 'stars__item_off';\r\n\r\n        if (ind + 1 === count && !Number.isInteger(props.rating)) {\r\n          return <div key={ind} className={`stars__item stars__item_half`}></div>\r\n        } else {\r\n          return <div key={ind} className={`stars__item ${isStarOn}`}></div>\r\n        }\r\n\r\n      })}\r\n    </div>\r\n  </div>);\r\n}\r\n\r\nexport default RatingStars;\r\n","import './style.css';\r\nimport RatingStars from '../ratingStars/ratingStars';\r\n\r\nconst RatingProduct = (props) => {\r\n\r\n  return (\r\n  <div className=\"rating\">\r\n    <span className=\"rating__value\">{props.data.product.rating}</span>\r\n    <RatingStars rating={props.data.product.rating} countStars={props.countStars}/>\r\n    <p className=\"recommends\">На основе\r\n      <span className=\"recommends__count\"> {props.data.product.reviews_count} оценок</span>\r\n    </p>\r\n  </div>);\r\n}\r\n\r\nexport default RatingProduct;\r\n","import './style.css';\r\nimport './media.css';\r\n\r\nconst PhotoProduct = (props) => {\r\n\r\n  return (\r\n  <section className=\"photo\">\r\n    <ul className=\"slider\">\r\n      {\r\n        props.data.product.picture_urls.map((el, ind) => {\r\n          return (\r\n            <li key={ind} className=\"slider__item\">\r\n              <img className=\"slider__image\" src={el} alt={props.data.product.name} />\r\n            </li>\r\n          );\r\n        })\r\n      }\r\n    </ul>\r\n  </section>);\r\n}\r\n\r\nexport default PhotoProduct;\r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\nimport './media.css';\r\n\r\nclass FilterComments extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      selected: '',\r\n      allReviews: [],\r\n    }\r\n    \r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.getAllReviewsFromApi = this.getAllReviewsFromApi.bind(this);\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({selected: e.target.value});\r\n    const reviews = [...this.state.allReviews];\r\n    let sortReviews = [];\r\n\r\n    if (e.target.value === 'new') {\r\n      sortReviews = reviews.sort((a, b) => {\r\n      return new Date(b.created_at) - new Date(a.created_at);\r\n      })\r\n    } else {\r\n      sortReviews = reviews.sort((a, b) => {\r\n      return new Date(a.created_at) - new Date(b.created_at);\r\n    })\r\n    }\r\n\r\n    this.props.sortReviews(sortReviews);\r\n  }\r\n\r\n  async getAllReviewsFromApi() {\r\n    for(let i = 1; i < this.props.data.meta.total_pages; i++) {\r\n      const url = `https://w-api2.aplaut.io/widgets/v2/render.json?authentication_token=56fa337b8ddf870c76021a5f&context=product&context_id=10350209&theme_id=default&widget_id=product-reviews&page=${i}`;\r\n      const res = await fetch(url);\r\n      let dataJSON = {};\r\n  \r\n      if (res.ok) {\r\n        dataJSON = await res.json();\r\n      }\r\n      \r\n      this.setState({\r\n        allReviews: [...this.state.allReviews, ...dataJSON.reviews],\r\n      })\r\n    }    \r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getAllReviewsFromApi();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <div className=\"filter-comments\">\r\n      <p className=\"filter-comments__title\">Сортировать:</p>\r\n      <select className=\"filter-comments__choice\" \r\n        value={this.state.selected}\r\n        onChange={this.handleChange}>\r\n        <option value=\"new\">Сначала новые</option>\r\n        <option value=\"old\">Сначала старые</option>\r\n      </select>\r\n    </div>);\r\n  }\r\n}\r\n\r\nexport default FilterComments;\r\n","import RatingStars from '../ratingStars/ratingStars';\r\n\r\nconst HeaderComment = (props) => {\r\n  let timeUsage = null;\r\n\r\n  if (props.data.author.details) {\r\n    timeUsage = props.data.author.details\r\n      .find((el) => el.label === 'Срок использования');\r\n  }\r\n\r\n  return (\r\n    <header className=\"comment__header\">\r\n      <div className=\"author\">\r\n        <p className=\"author__name\">{props.data.author.name}</p>\r\n        <div className=\"author__rating-detail\">\r\n          <RatingStars rating={props.data.rating} countStars={props.countStars}/>\r\n          <p className=\"author__detail\">\r\n            {timeUsage ? `${timeUsage.label}: ${timeUsage.value}` : null}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <p className=\"comment__date\">{getDateOfPost(props.data.created_at)}</p>\r\n    </header>\r\n  )\r\n}\r\n\r\nconst getDateOfPost = (time) => {\r\n  const date = new Date(time);\r\n  const settings = {\r\n    day: 'numeric',\r\n    month: 'long',\r\n    year: 'numeric'\r\n  };\r\n\r\n  return date.toLocaleDateString(`ru`, settings);\r\n}\r\n\r\nexport default HeaderComment; \r\n","import React, { Component } from 'react';\r\n\r\nclass BodyComment extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      likesCount: this.props.data.likes,\r\n      dislikesCount: this.props.data.dislikes,\r\n      isLikeClicked: false,\r\n      isDislikeClicked: false,\r\n    }\r\n\r\n    this.likesHandleClick = this.likesHandleClick.bind(this);\r\n    this.dislikesHandleClick = this.dislikesHandleClick.bind(this);\r\n  }\r\n\r\n  likesHandleClick() {\r\n    this.setState({isLikeClicked: !this.state.isLikeClicked}); \r\n\r\n    if (!this.state.isLikeClicked && !this.state.isDislikeClicked) {\r\n      this.setState({likesCount: this.state.likesCount + 1});\r\n    } else if (this.state.isDislikeClicked) {\r\n      return null;\r\n    } else {\r\n      this.setState({likesCount: this.state.likesCount - 1});\r\n    }\r\n  }\r\n\r\n  dislikesHandleClick() {\r\n    this.setState({isDislikeClicked: !this.state.isDislikeClicked});\r\n\r\n    if (!this.state.isDislikeClicked && !this.state.isLikeClicked) {\r\n      this.setState({dislikesCount: this.state.dislikesCount + 1});\r\n    } else if (this.state.isLikeClicked) {\r\n      return null;\r\n    } else {\r\n      this.setState({dislikesCount: this.state.dislikesCount - 1});\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"comment__body\">\r\n        <p className=\"comment__review\">{this.props.data.body}</p>\r\n        <div className=\"comment__btns\">\r\n          <button className={`comment__btn comment__btn_like \r\n            ${this.state.isLikeClicked ? 'comment__btn_liked' : ''}`}\r\n            onClick={!this.state.isDislikeClicked ? this.likesHandleClick : null}>\r\n            {this.state.likesCount}\r\n          </button>\r\n          <button className={`comment__btn comment__btn_dislike \r\n            ${this.state.isDislikeClicked ? 'comment__btn_disliked' : ''}`} \r\n            onClick={!this.state.isLikeClicked ? this.dislikesHandleClick : null}>\r\n            {this.state.dislikesCount}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BodyComment; \r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\nimport './media.css';\r\nimport HeaderComment from \"./headerComment\";\r\nimport BodyComment from \"./bodyComment\";\r\n\r\nclass Comments extends Component{\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      setNewKey: false,\r\n      currentPage: 1,\r\n      perPage: this.props.data.meta.per_page,\r\n    }\r\n\r\n    this.loadCommentMore = this.loadCommentMore.bind(this);\r\n  }\r\n\r\n  loadCommentMore(e) {\r\n    e.preventDefault();\r\n    this.props.loadComments('isClicked');\r\n    this.setState({\r\n      setNewKey: true,\r\n      currentPage: this.state.currentPage + 1,\r\n      perPage: this.state.perPage + this.props.data.meta.per_page,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"comment\">\r\n        {\r\n          this.props.sortReviews ?\r\n          this.props.sortReviews.slice(0,this.state.perPage).map((el, ind) => {\r\n            return (\r\n              <div key={!this.state.setNewKey ? el.id : el.id+ind.toString()} className=\"comment__item\">\r\n                <HeaderComment data={el} countStars={this.props.countStars}/>\r\n                <BodyComment data={el}/>\r\n              </div>\r\n            );\r\n          }) :\r\n          this.props.reviews.slice(0,this.state.perPage).map((el, ind) => {\r\n            return (\r\n              <div key={!this.state.setNewKey ? el.id : el.id+ind.toString()} className=\"comment__item\">\r\n                <HeaderComment data={el} countStars={this.props.countStars}/>\r\n                <BodyComment data={el}/>\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n        {\r\n          this.state.currentPage < this.props.data.meta.total_pages ?\r\n          <button className=\"comment__more\" onClick={this.loadCommentMore}>Загрузить еще</button> :\r\n          null\r\n        }\r\n        \r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Comments;\r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\nimport './media.css';\r\nimport RatingProduct from './components/ratingProduct/ratingProduct';\r\nimport PhotoProduct from './components/photoProduct/photoProduct';\r\nimport FilterComments from './components/filterComments/filterComments';\r\nimport Comments from './components/comments/comments'\r\n\r\nclass App extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.countStars = 5;\r\n    this.state = {\r\n      data: null,\r\n      totalPage: null,\r\n      currentPage: 1,\r\n      reviews: [],\r\n      sortReviewsDate: null,\r\n    }\r\n    this.getDataFromApi = this.getDataFromApi.bind(this);\r\n    this.addMoreComments = this.addMoreComments.bind(this);\r\n    this.sortReviewsHandle = this.sortReviewsHandle.bind(this);\r\n  }\r\n\r\n  async getDataFromApi() {\r\n    const url = `https://w-api2.aplaut.io/widgets/v2/render.json?authentication_token=56fa337b8ddf870c76021a5f&context=product&context_id=10350209&theme_id=default&widget_id=product-reviews&page=${this.state.currentPage}`;\r\n    const res = await fetch(url);\r\n    let dataJSON = {};\r\n\r\n    if (res.ok) {\r\n      dataJSON = await res.json();\r\n    }\r\n    \r\n    this.setState({\r\n      data: dataJSON,\r\n      totalPage: dataJSON.meta.total_pages,\r\n      currentPage: this.state.currentPage + 1, \r\n      reviews: [...this.state.reviews, ...dataJSON.reviews],\r\n    })\r\n  }\r\n\r\n  addMoreComments(click) {\r\n    if (click) {\r\n      this.getDataFromApi();\r\n    }\r\n  }\r\n\r\n  sortReviewsHandle(sort) {\r\n    this.setState({sortReviewsDate: [...sort]});\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getDataFromApi();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <section className=\"widget\">\r\n      <header className=\"widget__header\">\r\n        {this.state.data && \r\n          <RatingProduct data={this.state.data}\r\n            countStars={this.countStars}/>\r\n        }\r\n        <button className=\"widget__write\">Написать отзыв</button>\r\n      </header>\r\n      {this.state.data && <PhotoProduct data={this.state.data}/>}\r\n      {this.state.data && \r\n        <FilterComments \r\n          data={this.state.data}\r\n          sortReviews={this.sortReviewsHandle}/>}\r\n      {this.state.data && \r\n        <Comments \r\n          data={this.state.data}\r\n          reviews={this.state.reviews}\r\n          sortReviews={this.state.sortReviewsDate}\r\n          countStars={this.countStars}\r\n          loadComments={this.addMoreComments}/>}\r\n    </section>)    \r\n  }\r\n}\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('app')\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}